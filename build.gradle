/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
 
 buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "com.bmuschko:gradle-tomcat-plugin:2.5"
    }
}

 plugins {
    id 'war'
    id 'java'	
	id 'org.akhikhl.gretty' version '1.4.2'
 }
 dependencies {
        providedCompile 'com.bmuschko:gradle-tomcat-plugin:2.5'
    }
	
 gretty {
 servletContainer = 'tomcat7'
}
task copyToLib(type: Copy) {
    into "$buildDir/server"        //Default $buildDir is build/
    from(configurations.providedCompile) {  //Note the use of the name of dependency 
        include "gradle-tomcat-plugin*"      // configuration "compileOnly"
        rename { String fileName ->     //Forget the version # from filename
"gradle-tomcat-plugin-2.5.jar"   
        }
    }
}

task stage {
	dependsOn clean, war
	}
	war.mustRunAfter clean


dependencies {

	providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
	providedCompile group: 'javax.enterprise', name: 'cdi-api', version: '1.1.EDR1'
	providedCompile group: 'javax.websocket', name: 'javax.websocket-api', version: '1.1'
	providedCompile group: 'com.bmuschko', name: 'gradle-tomcat-plugin', version: '2.5'
	

	
}


 repositories {
    jcenter()
    mavenCentral()
}