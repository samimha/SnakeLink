/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
 

plugins {
    id 'war'
    id 'java'
    id 'org.akhikhl.gretty' version '1.4.2'
}

task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.compile) {
        include "webapp-runner*"
    }
}
task stage() {
    dependsOn clean, war
}
war.mustRunAfter clean

stage.dependsOn(copyToLib)

dependencies {
    compileOnly 'com.github.jsimone:webapp-runner:8.5.30.0'
    providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
    providedCompile group: 'javax.enterprise', name: 'cdi-api', version: '1.1.EDR1'
    providedCompile group: 'javax.websocket', name: 'javax.websocket-api', version: '1.1'
    providedCompile group: 'com.bmuschko', name: 'gradle-tomcat-plugin', version: '2.5'
}


gretty {
    servletContainer = 'tomcat8'
}

repositories {
    jcenter()
    mavenCentral()
}

